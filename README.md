# digits-platform

Digits is still very much *in progress*, visit [the wiki](https://github.com/Digits-Project/digits-platform/wiki) for various musings about how it all works.

We've started development and you can follow along with the commands below. NOTE: You need to have Docker installed for this to work. Check out [Docker for Mac](https://docs.docker.com/docker-for-mac/) or [Docker for Windows](https://docs.docker.com/docker-for-windows/) for an easy-to-install version of Docker for desktop machines. If you aren't familiar with Docker, please read [this great introduction to Docker](http://odewahn.github.io/docker-jumpstart/introduction.html).

This repository contains three directories for each component of the Digits-Platform:

**digits-proxy** - The proxy server is the most important part of the Digits platform. This component connects the globally identified Digits to the docker container running a particular *Publication* or *Digit*. The routing is specified in the [`nginx.conf`](digits-proxy/nginx.conf) file in the [`digits-proxy`](digits-proxy) directory.

**pgh-digits-pub** - pgh-digits.pub is a [Publication](https://github.com/Digits-Project/digits-platform/wiki#publication). This is an nginx webserver serving the static files in the `website` directory. Those files were generated by the [Lektor content management system](https://www.getlektor.com/).

**digit-0** - digit-0 is a [Digit](https://github.com/Digits-Project/digits-platform/wiki#digit). At the moment it is just an nginx webserver serving a very simple, static, index.html file.

Each of the components are wired together using the [`docker-compose.yml`](docker-compose.yml) file in the root of this repository. See [the documentation to learn how to read docker-compose files](https://docs.docker.com/compose/compose-file/) for information about how they are wired together. If you have Docker installed you should be able to run this command from the root directory of this repository:
```
docker-compose up
```
When you run this command for the first time, docker-compose will build three images and run each application in a Docker container. When you run the command you should see something that looks like this:
```
Building pgh-digits-pub
Step 1 : FROM nginx
 ---> 0d409d33b27e
Step 2 : COPY website /usr/share/nginx/html
 ---> Using cache
 ---> e4ec27ce89ef
Successfully built e4ec27ce89ef
Building digit-0
Step 1 : FROM nginx
 ---> 0d409d33b27e
Step 2 : COPY index.html /usr/share/nginx/html/index.html
 ---> Using cache
 ---> c8b0520f48f0
Successfully built c8b0520f48f0
Starting pgh-digits-pub
Starting digits-proxy
Starting digit-0
Attaching to pgh-digits-pub, digits-proxy, digit-0
```

Now visit [http://pgh.digits.pub/](http://pgh.digits.pub/) it should load up the PGH Digits websites (such that it is). What you are seeing is the contents of `pgh-digits-pub/website` being served up by the webserver running in the `pgh-digits-pub` webserver. Now visit [http://pgh.digits.pub/0](http://pgh.digits.pub/0), you should see a little text blurb that is from `digits/0/index.html`. The proxy is set up to re-direct all requests to pgh.digits.pub/0 to the webserver running in the `digits-0` container.


 The Digits-Platform will continue to run until you hit ctrl-c and run:
 ```
 docker-compose stop
 ```
